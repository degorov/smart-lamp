(self.webpackChunksmart_lamp=self.webpackChunksmart_lamp||[]).push([[179],{6702:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var o,r=a(7991);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l={ping:r.Z},n=l;var d,s;(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(l,"default","C:\\Projects\\smart-lamp\\app\\src\\api\\index.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},7991:(e,t,a)=>{"use strict";var o,r,l;async function n(e){try{const t=await window.fetchWithLoading("http://".concat(e,"/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"ping"})});return"OK"===(await t.json()).error}catch(e){return!1}}a.d(t,{Z:()=>n}),e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(n,"ping","C:\\Projects\\smart-lamp\\app\\src\\api\\ping.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},9833:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var o,r,l,n=a(7294),d=a(3930);function s(){const e=(0,n.useContext)(d.L);return n.createElement("p",null,"Будильник ",String(e))}e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(s,"useContext{connected}"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(s,"Alarm","C:\\Projects\\smart-lamp\\app\\src\\components\\Alarm.jsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},4251:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var o,r=a(7294),l=a(1570),n=a(1120),d=a(3457),s=a(8129),c=a(1579),i=a(6159),u=a(9702),m=a(7748),p=a(5477),f=a(3832),b=a(5834),v=a(3930),L=a(6702),g=a(7144),Z=a(7540),E=a(8016),G=a(9833),H=a(55);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const y=(0,n.Z)((e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})));function C(){const e=y(),t=(0,d.Z)("(prefers-color-scheme: dark)"),a=(0,r.useMemo)((()=>(0,s.Z)({palette:{primary:{main:t?"#FFCD14":"#F55528"},secondary:{main:t?"#0AAAD7":"#008CC3"},type:t?"dark":"light"}},i.nx)),[t]),o=["Эффекты","Будильник","Настройки"],[l,n]=(0,r.useState)(!1),[h,C]=(0,r.useState)(null),[w,x]=(0,r.useState)({address:"",valid:!1}),[S,j]=(0,r.useState)(),[P,M]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=localStorage.getItem("lamp-ip");e?x({address:e,valid:!0}):j(!1),window.fetchWithLoading=async(...e)=>{n(!0);try{return await fetch(...e)}finally{n(!1)}}}),[]),(0,r.useEffect)((()=>{void 0===S&&w.address?(async()=>{await L.Z.ping(w.address)?(localStorage.setItem("lamp-ip",w.address),j(!0),null===h&&C(0)):j(!1)})():!1===S&&C(2),M(!1)}),[w.address,S,h]),r.createElement(c.Z,{theme:a},r.createElement(b.ZP,null),r.createElement(f.Z,{disableGutters:!0,maxWidth:"sm"},r.createElement(v.L.Provider,{value:S},r.createElement(g.Z,{title:o[h],changed:P}),r.createElement(m.Z,{pb:"56px"},0===h?r.createElement(E.Z,null):1===h?r.createElement(G.Z,null):2===h?r.createElement(H.Z,{ip:w,setIp:x,doConnect:()=>j(),doChange:()=>M(!0)}):null),r.createElement(Z.Z,{page:h,labels:o,setPage:C}))),r.createElement(u.Z,{className:e.backdrop,open:l},r.createElement(p.Z,{color:"inherit"})))}h(C,"useStyles{classes}\nuseMediaQuery{prefersDarkMode}\nuseMemo{theme}\nuseState{[loading, setLoading](false)}\nuseState{[page, setPage](null)}\nuseState{[ip, setIp]({ address: '', valid: false })}\nuseState{[connected, setConnected]}\nuseState{[changed, setChanged](false)}\nuseEffect{}\nuseEffect{}",(()=>[y,d.Z]));const w=(0,l.w)(C),x=w;var S,j;(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(y,"useStyles","C:\\Projects\\smart-lamp\\app\\src\\components\\App.jsx"),S.register(C,"App","C:\\Projects\\smart-lamp\\app\\src\\components\\App.jsx"),S.register(w,"default","C:\\Projects\\smart-lamp\\app\\src\\components\\App.jsx")),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&j(e)},3930:(e,t,a)=>{"use strict";a.d(t,{L:()=>l});var o,r=a(7294);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const l=(0,r.createContext)();var n,d;(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(l,"ConnectedContext","C:\\Projects\\smart-lamp\\app\\src\\components\\AppContexts.js"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},7540:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var o,r=a(7294),l=a(1120),n=a(5881),d=a(8665),s=a(1076),c=a(2832),i=a(9956),u=a(3930);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const p=(0,l.Z)((e=>({root:{width:"100%",maxWidth:e.breakpoints.values.sm,position:"fixed",bottom:0,zIndex:100}})));function f({page:e,labels:t,setPage:a}){const o=p();return(0,r.useContext)(u.L)?r.createElement(n.Z,{className:o.root,showLabels:!0,value:e,onChange:(e,t)=>{a(t)}},r.createElement(d.Z,{label:t[0],icon:r.createElement(i.Z,null)}),r.createElement(d.Z,{label:t[1],icon:r.createElement(s.Z,null)}),r.createElement(d.Z,{label:t[2],icon:r.createElement(c.Z,null)})):null}var b,v;m(f,"useStyles{classes}\nuseContext{connected}",(()=>[p])),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(p,"useStyles","C:\\Projects\\smart-lamp\\app\\src\\components\\BottomNav.jsx"),b.register(f,"BottomNav","C:\\Projects\\smart-lamp\\app\\src\\components\\BottomNav.jsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},415:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var o,r,l,n=a(7294),d=a(7748),s=a(9659);function c(){return n.createElement(d.Z,{textAlign:"center",p:2},n.createElement("div",null,n.createElement(s.Z,{target:"_blank",rel:"noreferrer",underline:"always",href:"https://github.com/degorov/smart-lamp"},"Репозиторий проекта на GitHub")),n.createElement("div",null,"Application icon made by ",n.createElement(s.Z,{target:"_blank",rel:"noreferrer",underline:"always",href:"https://www.freepik.com"},"Freepik")," from ",n.createElement(s.Z,{target:"_blank",rel:"noreferrer",underline:"always",href:"https://www.flaticon.com/"},"www.flaticon.com")))}e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(c,"Credits","C:\\Projects\\smart-lamp\\app\\src\\components\\Credits.jsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},8016:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var o,r,l,n=a(7294),d=a(3930);function s(){const e=(0,n.useContext)(d.L);return n.createElement("p",null,"Эффекты ",String(e))}e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(s,"useContext{connected}"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(s,"Effects","C:\\Projects\\smart-lamp\\app\\src\\components\\Effects.jsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},55:(e,t,a)=>{"use strict";a.d(t,{Z:()=>P});var o,r=a(7294),l=a(1120),n=a(282),d=a(4436),s=a(1749),c=a(7812),i=a(7397),u=a(3700),m=a(2822),p=a(998),f=a(1860),b=a(6837),v=a(5639),L=a(6718),g=a(4845),Z=a(6183),E=a(2318),G=a(7816),H=a(5352),h=a(7802),y=a(67),C=a(8270),w=a(3930),x=a(415);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const j=(0,l.Z)((e=>({root:{backgroundColor:e.palette.background.paper},icon:{marginTop:"-20px"}})));function P({ip:e,setIp:t,doConnect:a,doChange:o}){const l=j(),S=(0,r.useContext)(w.L),[P,M]=(0,r.useState)({ssid:"Smart-Lamp",password:"",showPassword:!1,timezone:3,brightness:192}),k=e=>t=>{M({...P,[e]:t.target.value}),o()};return(0,r.useEffect)((()=>{S&&console.log("LOAD SETTINGS")}),[S]),r.createElement(r.Fragment,null,r.createElement(m.Z,{className:l.root},r.createElement(b.Z,null,"Подключение:"),r.createElement(p.Z,null,r.createElement(Z.Z,{id:"lamp-ip",label:"IP-адрес лампы",variant:"outlined",size:"small",value:e.address,onChange:e=>{const a=e.target.value;/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(a)?t({address:a,valid:!0}):t({address:a,valid:!1})},error:!e.valid}),r.createElement(f.Z,null,r.createElement(n.Z,{variant:"contained",color:"primary",disabled:!e.valid,onClick:a},r.createElement(h.Z,null)))),S?r.createElement(r.Fragment,null,r.createElement(p.Z,null,r.createElement(Z.Z,{id:"ssid",label:"Имя сети",variant:"outlined",size:"small",fullWidth:!0,value:P.ssid,onChange:k("ssid")})),r.createElement(p.Z,null,r.createElement(d.Z,{variant:"outlined",size:"small",fullWidth:!0},r.createElement(u.Z,{htmlFor:"password"},"Пароль сети"),r.createElement(L.Z,{id:"password",labelWidth:95,type:P.showPassword?"text":"password",value:P.password,onChange:k("password"),endAdornment:r.createElement(i.Z,{position:"end"},r.createElement(c.Z,{onClick:()=>{M({...P,showPassword:!P.showPassword})},onMouseDown:e=>{e.preventDefault()},edge:"end"},P.showPassword?r.createElement(y.Z,null):r.createElement(C.Z,null)))}))),r.createElement(b.Z,null,"Часовой пояс:"),r.createElement(p.Z,null,r.createElement(Z.Z,{id:"timezone",select:!0,variant:"outlined",size:"small",fullWidth:!0,value:P.timezone,onChange:k("timezone")},r.createElement(v.Z,{value:2},"МСК−1 (калининградское время)"),r.createElement(v.Z,{value:3},"МСК (московское время)"),r.createElement(v.Z,{value:4},"МСК+1 (самарское время)"),r.createElement(v.Z,{value:5},"МСК+2 (екатеринбургское время)"),r.createElement(v.Z,{value:6},"МСК+3 (омское время)"),r.createElement(v.Z,{value:7},"МСК+4 (красноярское время)"),r.createElement(v.Z,{value:8},"МСК+5 (иркутское время)"),r.createElement(v.Z,{value:9},"МСК+6 (якутское время)"),r.createElement(v.Z,{value:10},"МСК+7 (владивостокское время)"),r.createElement(v.Z,{value:11},"МСК+8 (магаданское время)"),r.createElement(v.Z,{value:12},"МСК+9 (камчатское время)"))),r.createElement(b.Z,null,"Максимальная яркость:",r.createElement(E.Z,{component:"span",color:P.brightness>192?"error":"initial"}," ",P.brightness)),r.createElement(p.Z,null,r.createElement(s.Z,{container:!0,spacing:2,alignItems:"center"},r.createElement(s.Z,{item:!0,className:l.icon},r.createElement(H.Z,null)),r.createElement(s.Z,{item:!0,xs:!0},r.createElement(g.Z,{min:0,max:255,marks:[{value:192,label:"Предел БП"}],value:P.brightness,onChange:(e,t)=>{M({...P,brightness:t}),o()}})),r.createElement(s.Z,{item:!0,className:l.icon},r.createElement(G.Z,null))))):null),r.createElement(x.Z,null))}var M,k;S(P,"useStyles{classes}\nuseContext{connected}\nuseState{[settings, setSettings]({\n    ssid: 'Smart-Lamp',\n    password: '',\n    showPassword: false,\n    timezone: 3,\n    brightness: 192,\n  })}\nuseEffect{}",(()=>[j])),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(j,"useStyles","C:\\Projects\\smart-lamp\\app\\src\\components\\Settings.jsx"),M.register(P,"Settings","C:\\Projects\\smart-lamp\\app\\src\\components\\Settings.jsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},7144:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var o,r=a(7294),l=a(1120),n=a(5258),d=a(7812),s=a(8358),c=a(2318),i=a(3375),u=a(739),m=a(5403),p=a(3930);e=a.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const b=(0,l.Z)((e=>({title:{flexGrow:1},save:{marginRight:e.spacing(2)}})));function v({title:e,changed:t}){const a=b(),o=(0,r.useContext)(p.L);return r.createElement(n.Z,{position:"sticky"},r.createElement(s.Z,null,r.createElement(c.Z,{variant:"h6",className:a.title},e),t?r.createElement(d.Z,{className:a.save,color:"inherit"},r.createElement(i.Z,null)):null,o?r.createElement(m.Z,null):r.createElement(u.Z,null)))}var L,g;f(v,"useStyles{classes}\nuseContext{connected}",(()=>[b])),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(b,"useStyles","C:\\Projects\\smart-lamp\\app\\src\\components\\TopBar.jsx"),L.register(v,"TopBar","C:\\Projects\\smart-lamp\\app\\src\\components\\TopBar.jsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},5579:(e,t,a)=>{"use strict";var o=a(7294),r=a(9060),l=a(4251);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,r.render(o.createElement(l.Z),document.getElementById("app"))}},0,[[3658,666,216],[5579,666,216]]]);